# SWIG bug on windows

go build generate some cgo file with tooooooooo long path.

```
CGO_LDFLAGS="-g" "-O2" "C:\\go\\go1.7.1.windows-amd64\\pkg\\tool\\windows_amd64\\cgo.exe" -objdir "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\" -importpath github.com/chai2010/hello-swig-bug -- -I "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\" "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\hello_with_tooooooo_long_path.go"
```

```
go version
go version go1.7.1 windows/amd64

go test -x
WORK=C:\Users\chai\AppData\Local\Temp\go-build684522078
mkdir -p $WORK\github.com\chai2010\hello-swig-bug\_test\github.com\chai2010\
mkdir -p $WORK\github.com\chai2010\hello-swig-bug\_test\_obj_test\
swig -version
cd $WORK
"C:\\go\\go1.7.1.windows-amd64\\pkg\\tool\\windows_amd64\\compile.exe" -o "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\_go_.o" -trimpath "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078" -p main -complete -buildid 105a0c9e827438ed5f5c69d3e0c80afe7702b179 -D _/C_/Users/chai/AppData/Local/Temp/go-build684522078 "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\swig_intsize.go"
cd C:\go\gopkg\src\github.com\chai2010\hello-swig-bug
swig -go -cgo -intgosize 64 -module hello_with_tooooooo_long_path -o "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\hello_with_tooooooo_long_path_wrap.c" -outdir "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\" hello_with_tooooooo_long_path.swig
CGO_LDFLAGS="-g" "-O2" "C:\\go\\go1.7.1.windows-amd64\\pkg\\tool\\windows_amd64\\cgo.exe" -objdir "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\" -importpath github.com/chai2010/hello-swig-bug -- -I "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\" "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\hello_with_tooooooo_long_path.go"
cd $WORK
gcc -fdebug-prefix-map=a=b -c trivial.c
gcc -gno-record-gcc-switches -c trivial.c
cd C:\go\gopkg\src\github.com\chai2010\hello-swig-bug
gcc -I "C:\\go\\gopkg\\src\\github.com\\chai2010\\hello-swig-bug" -m64 -mthreads -fmessage-length=0 "-fdebug-prefix-map=C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078=/tmp/go-build" -gno-record-gcc-switches -I "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\" -g -O2 -o "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\_cgo_main.o" -c "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\_cgo_main.c"
gcc -I "C:\\go\\gopkg\\src\\github.com\\chai2010\\hello-swig-bug" -m64 -mthreads -fmessage-length=0 "-fdebug-prefix-map=C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078=/tmp/go-build" -gno-record-gcc-switches -I "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\" -g -O2 -o "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\_cgo_export.o" -c "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\_cgo_export.c"
gcc -I "C:\\go\\gopkg\\src\\github.com\\chai2010\\hello-swig-bug" -m64 -mthreads -fmessage-length=0 "-fdebug-prefix-map=C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078=/tmp/go-build" -gno-record-gcc-switches -I "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\" -g -O2 -o "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\C__Users_chai_AppData_Local_Temp_go-build684522078_github.com_chai2010_hello-swig-bug__test__obj_test_hello_with_tooooooo_long_path.cgo2.o" -c "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\C__Users_chai_AppData_Local_Temp_go-build684522078_github.com_chai2010_hello-swig-bug__test__obj_test_hello_with_tooooooo_long_path.cgo2.c"
gcc -I "C:\\go\\gopkg\\src\\github.com\\chai2010\\hello-swig-bug" -m64 -mthreads -fmessage-length=0 "-fdebug-prefix-map=C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078=/tmp/go-build" -gno-record-gcc-switches -I "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\" -g -O2 -o "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\hello.o" -c "C:\\go\\gopkg\\src\\github.com\\chai2010\\hello-swig-bug\\hello.c"
gcc -I "C:\\go\\gopkg\\src\\github.com\\chai2010\\hello-swig-bug" -m64 -mthreads -fmessage-length=0 "-fdebug-prefix-map=C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078=/tmp/go-build" -gno-record-gcc-switches -I "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\" -g -O2 -o "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\C__Users_chai_AppData_Local_Temp_go-build684522078_github.com_chai2010_hello-swig-bug__test__obj_test_hello_with_tooooooo_long_path_wrap.o" -c "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\hello_with_tooooooo_long_path_wrap.c"
gcc -I "C:\\go\\gopkg\\src\\github.com\\chai2010\\hello-swig-bug" -m64 -mthreads -fmessage-length=0 "-fdebug-prefix-map=C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078=/tmp/go-build" -gno-record-gcc-switches -o "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\_cgo_.o" "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\_cgo_main.o" "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\_cgo_export.o" "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\C__Users_chai_AppData_Local_Temp_go-build684522078_github.com_chai2010_hello-swig-bug__test__obj_test_hello_with_tooooooo_long_path.cgo2.o" "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\hello.o" "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\C__Users_chai_AppData_Local_Temp_go-build684522078_github.com_chai2010_hello-swig-bug__test__obj_test_hello_with_tooooooo_long_path_wrap.o" -g -O2
"C:\\go\\go1.7.1.windows-amd64\\pkg\\tool\\windows_amd64\\cgo.exe" -objdir "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\" -dynpackage hello -dynimport "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\_cgo_.o" -dynout "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\_cgo_import.go"
cd $WORK
gcc -no-pie -c trivial.c
cd C:\go\gopkg\src\github.com\chai2010\hello-swig-bug
gcc -I "C:\\go\\gopkg\\src\\github.com\\chai2010\\hello-swig-bug" -m64 -mthreads -fmessage-length=0 "-fdebug-prefix-map=C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078=/tmp/go-build" -gno-record-gcc-switches -o "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\_all.o" "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\_cgo_export.o" "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\C__Users_chai_AppData_Local_Temp_go-build684522078_github.com_chai2010_hello-swig-bug__test__obj_test_hello_with_tooooooo_long_path.cgo2.o" "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\hello.o" "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\C__Users_chai_AppData_Local_Temp_go-build684522078_github.com_chai2010_hello-swig-bug__test__obj_test_hello_with_tooooooo_long_path_wrap.o" -g -O2 -Wl,-r -nostdlib -Wl,--start-group -lmingwex -lmingw32 -Wl,--end-group
"C:\\go\\go1.7.1.windows-amd64\\pkg\\tool\\windows_amd64\\compile.exe" -o "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\github.com\\chai2010\\hello-swig-bug.a" -trimpath "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078" -p github.com/chai2010/hello-swig-bug -buildid 1d8e3f7491dd1ae8fc906b5acb0fbde32e2ddb5e -D _/C_/go/gopkg/src/github.com/chai2010/hello-swig-bug -I "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078" -pack "C:\\go\\gopkg\\src\\github.com\\chai2010\\hello-swig-bug\\hello.go" "C:\\go\\gopkg\\src\\github.com\\chai2010\\hello-swig-bug\\hello_test.go" "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\_cgo_gotypes.go" "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\C__Users_chai_AppData_Local_Temp_go-build684522078_github.com_chai2010_hello-swig-bug__test__obj_test_hello_with_tooooooo_long_path.cgo1.go" "C:\\Users\\chai\\AppData\\Local\\Temp\\go-build684522078\\github.com\\chai2010\\hello-swig-bug\\_test\\_obj_test\\_cgo_import.go"
# github.com/chai2010/hello-swig-bug
C:\Users\chai\AppData\Local\Temp\go-build684522078\github.com\chai2010\hello-swig-bug\_test\_obj_test\_cgo_gotypes.go:5: package hello_with_tooooooo_long_path; expected hello
C:\Users\chai\AppData\Local\Temp\go-build684522078\github.com\chai2010\hello-swig-bug\_test\_obj_test\hello_with_tooooooo_long_path.go:13[C:\Users\chai\AppData\Local\Temp\go-build684522078\github.com\chai2010\hello-swig-bug\_test\_obj_test\C__Users_chai_AppData_Local_Temp_go-build684522078_github.com_chai2010_hello-swig-bug__test__obj_test_hello_with_tooooooo_long_path.cgo1.go:4]: package hello_with_tooooooo_long_path; expected hello
$WORK\github.com\chai2010\hello-swig-bug\_test\hello-swig-bug.test.exe

```

1. https://github.com/golang/go/issues/3358
